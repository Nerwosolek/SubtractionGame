var game;var lang="pl";var who_plays;var startPanel;var statusPanel;var ballsNumber=12;var currentBallsNumber=ballsNumber;var currentBalls;var bomb;var ballSrc="img/beach-ball-4.png";var ballInvSrc="img/beach-ball-4inv.png";var ballCmpSrc="img/beach-ball-4cmp.png";var bombSrc="img/bomb.png";var gameBalls;function bombMouseoutHandler(){currentBalls[currentBalls.length-1].className="ball";if(currentBalls.length==2){currentBalls[0].src=ballSrc}}function bombMouseoverHandler(){currentBalls[currentBalls.length-1].className="ball96";if(currentBalls.length==2){currentBalls[0].src=ballInvSrc}}function ballMouseoutHandler(){this.src=ballSrc;currentBalls[0].src=ballSrc}function ballMouseoverHandler(){this.src=ballInvSrc;currentBalls[0].src=ballInvSrc}function ballClickHandler(){if(currentBalls[0]==this){chooseBalls(1)}if(currentBalls[1]==this){chooseBalls(2)}}function prepareGame(a,b){game=a;lang=b}function startGame(c){if(c==0){who_plays="c"}else{who_plays="p"}statusPanel=document.getElementById("gameStatus");startPanel=document.getElementById("startPanel");game.removeChild(startPanel);gameBalls=document.getElementById("balls-col");currentBalls=new Array(ballsNumber);for(var a=1;a<ballsNumber;a++){var b=createBall();gameBalls.appendChild(b);currentBalls[a-1]=b}bomb=createBomb();gameBalls.appendChild(bomb);currentBalls[ballsNumber-1]=bomb;if(who_plays=="c"){computerMoves()}else{if(who_plays=="p"){playerMoves()}}}function createBall(){var a=new Image();a.src=ballSrc;a.classList.add("ball");return a}function createBomb(){var a=new Image();a.src=bombSrc;a.classList.add("ball");return a}function endTurn(){if(who_plays=="p"){if(currentBalls.length==0){switch(lang){case"en":gameStatus.innerHTML="You LOST!";break;default:gameStatus.innerHTML="Przegrałeś!";break}endGame();return}who_plays="c";computerMoves()}else{if(currentBalls.length==0){switch(lang){case"en":gameStatus.innerHTML="You WON!";break;default:gameStatus.innerHTML="Wygrałeś!";break}endGame();return}who_plays="p";playerMoves()}}function playerMoves(){switch(lang){case"en":gameStatus.innerHTML="Your move...";break;default:gameStatus.innerHTML="Twój ruch...";break}if(currentBalls.length==2||currentBalls.length==1){currentBalls[currentBalls.length-1].addEventListener("click",ballClickHandler);currentBalls[currentBalls.length-1].addEventListener("mouseover",bombMouseoverHandler);currentBalls[currentBalls.length-1].addEventListener("mouseout",bombMouseoutHandler);if(currentBalls.length==2){currentBalls[0].addEventListener("click",ballClickHandler);currentBalls[0].addEventListener("mouseover",ballMouseoverHandler);currentBalls[0].addEventListener("mouseout",ballMouseoutHandler)}}if(currentBalls.length>2){currentBalls[0].addEventListener("click",ballClickHandler);currentBalls[0].addEventListener("mouseover",ballMouseoverHandler);currentBalls[0].addEventListener("mouseout",ballMouseoutHandler);currentBalls[1].addEventListener("click",ballClickHandler);currentBalls[1].addEventListener("mouseover",ballMouseoverHandler);currentBalls[1].addEventListener("mouseout",ballMouseoutHandler)}}function chooseBalls(b){currentBalls[0].removeEventListener("click",ballClickHandler);currentBalls[0].removeEventListener("mouseover",ballMouseoverHandler);currentBalls[0].removeEventListener("mouseout",ballMouseoutHandler);if(currentBalls.length>1){currentBalls[1].removeEventListener("click",ballClickHandler);currentBalls[1].removeEventListener("mouseover",ballMouseoverHandler);currentBalls[1].removeEventListener("mouseout",ballMouseoutHandler)}if(currentBalls.length==2||currentBalls.length==1){currentBalls[currentBalls.length-1].removeEventListener("mouseout",bombMouseoutHandler)}for(var a=0;a<b;a++){gameBalls.removeChild(currentBalls[a])}currentBalls=currentBalls.slice(b);endTurn()}function computerMoves(){switch(lang){case"en":gameStatus.innerHTML="Computer moves";break;default:gameStatus.innerHTML="Ruch komputera";break}var b=currentBalls.length;if(b>1){var c=b%3;if(c==0){currentBalls[0].src=ballCmpSrc;currentBalls[1].src=ballCmpSrc;setTimeout(function(){chooseBalls(2)},1500)}if(c==1){var a=Math.floor(Math.random()*2)+1;currentBalls[0].src=ballCmpSrc;if(a>1){currentBalls[1].src=ballCmpSrc}setTimeout(function(){chooseBalls(a)},1500)}if(c==2){currentBalls[0].src=ballCmpSrc;setTimeout(function(){chooseBalls(1)},1500)}}else{if(b==1){currentBalls[0].className="ball96";setTimeout(function(){chooseBalls(1)},1500)}}}function endGame(){switch(lang){case"en":againButton='<button type="button" class="btn btn-primary btn-lg" onclick="resetGame()">Play again?</button>';break;default:againButton='<button type="button" class="btn btn-primary btn-lg" onclick="resetGame()">Jeszcze raz?</button>';break}gameBalls.innerHTML=againButton;gameBalls.className="col-xs-12 again"}function resetGame(){switch(lang){case"en":gameTitle='<h1 id="gameTitle">SUBTRACTION: The Game</h1>';break;default:gameTitle='<h1 id="gameTitle">Gra w odejmowanie</h1>';break}gameBalls.innerHTML="";game.appendChild(startPanel);gameStatus.innerHTML=gameTitle;gameBalls.className="balls-row col-xs-12"};